(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{1008:(e,s,t)=>{"use strict";t.d(s,{Wu:()=>c,ZB:()=>l,Zp:()=>i,aR:()=>o});var a=t(702),n=t(6606),r=t(9321);let i=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)("div",{ref:s,className:(0,r.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...n})});i.displayName="Card";let o=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)("div",{ref:s,className:(0,r.cn)("flex flex-col space-y-1.5 p-6",t),...n})});o.displayName="CardHeader";let l=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)("div",{ref:s,className:(0,r.cn)("text-2xl font-semibold leading-none tracking-tight",t),...n})});l.displayName="CardTitle",n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)("div",{ref:s,className:(0,r.cn)("text-sm text-muted-foreground",t),...n})}).displayName="CardDescription";let c=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)("div",{ref:s,className:(0,r.cn)("p-6 pt-0",t),...n})});c.displayName="CardContent",n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)("div",{ref:s,className:(0,r.cn)("flex items-center p-6 pt-0",t),...n})}).displayName="CardFooter"},1748:(e,s,t)=>{"use strict";t.d(s,{T:()=>i});var a=t(702),n=t(6606),r=t(9321);let i=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)("textarea",{className:(0,r.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:s,...n})});i.displayName="Textarea"},3316:(e,s,t)=>{Promise.resolve().then(t.bind(t,6016))},3466:(e,s,t)=>{"use strict";t.d(s,{$:()=>c});var a=t(702),n=t(6606),r=t(4176),i=t(3490),o=t(9321);let l=(0,i.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=n.forwardRef((e,s)=>{let{className:t,variant:n,size:i,asChild:c=!1,...d}=e,u=c?r.DX:"button";return(0,a.jsx)(u,{className:(0,o.cn)(l({variant:n,size:i,className:t})),ref:s,...d})});c.displayName="Button"},5914:(e,s,t)=>{"use strict";t.d(s,{Xi:()=>c,av:()=>d,j7:()=>l,tU:()=>o});var a=t(702),n=t(6606),r=t(8684),i=t(9321);let o=r.bL,l=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)(r.B8,{ref:s,className:(0,i.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...n})});l.displayName=r.B8.displayName;let c=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)(r.l9,{ref:s,className:(0,i.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...n})});c.displayName=r.l9.displayName;let d=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)(r.UC,{ref:s,className:(0,i.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...n})});d.displayName=r.UC.displayName},6016:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>el});var a=t(702),n=t(6606),r=t(1008),i=t(3466),o=t(1748),l=t(3501),c=t(5507);let d=(0,c.A)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),u=(0,c.A)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),m=(0,c.A)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);var p=t(6984),g=t(2626);let h=(0,c.A)("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);var x=t(6590),v=t(7059),f=t(130),y=t(2776),b="Progress",[j,N]=(0,f.A)(b),[w,S]=j(b),k=n.forwardRef((e,s)=>{var t,n,r,i;let{__scopeProgress:o,value:l=null,max:c,getValueLabel:d=O,...u}=e;(c||0===c)&&!T(c)&&console.error((t="".concat(c),n="Progress","Invalid prop `max` of value `".concat(t,"` supplied to `").concat(n,"`. Only numbers greater than 0 are valid max values. Defaulting to `").concat(100,"`.")));let m=T(c)?c:100;null===l||E(l,m)||console.error((r="".concat(l),i="Progress","Invalid prop `value` of value `".concat(r,"` supplied to `").concat(i,"`. The `value` prop must be:\n  - a positive number\n  - less than the value passed to `max` (or ").concat(100," if no `max` prop is set)\n  - `null` or `undefined` if the progress is indeterminate.\n\nDefaulting to `null`.")));let p=E(l,m)?l:null,g=I(p)?d(p,m):void 0;return(0,a.jsx)(w,{scope:o,value:p,max:m,children:(0,a.jsx)(y.sG.div,{"aria-valuemax":m,"aria-valuemin":0,"aria-valuenow":I(p)?p:void 0,"aria-valuetext":g,role:"progressbar","data-state":R(p,m),"data-value":null!=p?p:void 0,"data-max":m,...u,ref:s})})});k.displayName=b;var A="ProgressIndicator",C=n.forwardRef((e,s)=>{var t;let{__scopeProgress:n,...r}=e,i=S(A,n);return(0,a.jsx)(y.sG.div,{"data-state":R(i.value,i.max),"data-value":null!==(t=i.value)&&void 0!==t?t:void 0,"data-max":i.max,...r,ref:s})});function O(e,s){return"".concat(Math.round(e/s*100),"%")}function R(e,s){return null==e?"indeterminate":e===s?"complete":"loading"}function I(e){return"number"==typeof e}function T(e){return I(e)&&!isNaN(e)&&e>0}function E(e,s){return I(e)&&!isNaN(e)&&e<=s&&e>=0}C.displayName=A;var q=t(9321);let D=n.forwardRef((e,s)=>{let{className:t,value:n,...r}=e;return(0,a.jsx)(k,{ref:s,className:(0,q.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",t),...r,children:(0,a.jsx)(C,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:"translateX(-".concat(100-(n||0),"%)")}})})});D.displayName=k.displayName;let P=(0,c.A)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),_=(0,c.A)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),M=(0,c.A)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),W=(0,c.A)("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);function F(e){let{steps:s,progress:t,isCollapsed:n=!1,onToggleCollapse:o}=e,l=e=>{switch(e){case"completed":return(0,a.jsx)(x.A,{className:"h-4 w-4 text-green-600"});case"active":return(0,a.jsx)(m,{className:"h-4 w-4 text-blue-600 animate-spin"});case"error":return(0,a.jsx)(P,{className:"h-4 w-4 text-red-600"});default:return(0,a.jsx)(_,{className:"h-4 w-4 text-gray-400"})}},c=e=>{switch(e){case"completed":return"border-green-200 bg-green-50";case"active":return"border-blue-200 bg-blue-50";case"error":return"border-red-200 bg-red-50";default:return"border-gray-200 bg-gray-50"}};return n?(0,a.jsx)(r.Zp,{className:"border-l-4 border-l-blue-500",children:(0,a.jsx)(r.Wu,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(x.A,{className:"h-5 w-5 text-green-600"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium",children:"Research Process Completed"}),(0,a.jsxs)("div",{className:"text-sm text-gray-600",children:[s.filter(e=>"completed"===e.status).length," of ",s.length," steps completed"]})]})]}),(0,a.jsxs)(i.$,{onClick:o,variant:"outline",size:"sm",className:"flex items-center gap-2",children:[(0,a.jsx)(M,{className:"h-4 w-4"}),"Show Details"]})]})})}):(0,a.jsxs)(r.Zp,{className:"border-l-4 border-l-blue-500",children:[(0,a.jsxs)(r.aR,{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)(r.ZB,{className:"flex items-center gap-2",children:[(0,a.jsx)(m,{className:"h-5 w-5 text-blue-600 animate-spin"}),"Research in Progress"]}),o&&(0,a.jsxs)(i.$,{onClick:o,variant:"outline",size:"sm",className:"flex items-center gap-2",children:[(0,a.jsx)(W,{className:"h-4 w-4"}),"Collapse"]})]}),(0,a.jsx)(D,{value:t,className:"w-full"}),(0,a.jsxs)("div",{className:"text-sm text-gray-600",children:[t,"% complete"]})]}),(0,a.jsx)(r.Wu,{className:"space-y-4",children:s.map((e,s)=>(0,a.jsxs)("div",{className:"p-4 rounded border ".concat(c(e.status)),children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[l(e.status),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("div",{className:"font-medium",children:e.title}),e.model&&(0,a.jsxs)("div",{className:"text-sm text-gray-600",children:["Using ",e.model]})]}),(0,a.jsxs)(v.E,{variant:"completed"===e.status?"default":"secondary",children:["Step ",s+1]})]}),e.sources&&e.sources.length>0&&(0,a.jsxs)("div",{className:"mt-2",children:[(0,a.jsx)("div",{className:"text-xs text-gray-500 mb-1",children:"Sources:"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-1",children:e.sources.map((e,s)=>(0,a.jsx)(v.E,{variant:"outline",className:"text-xs",children:e},s))})]})]},e.id))})]})}var U=t(5914);let L=(0,c.A)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),Z=(0,c.A)("Link2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]]),G=(0,c.A)("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]),V=0,z=new Map,J=e=>{if(z.has(e))return;let s=setTimeout(()=>{z.delete(e),$({type:"REMOVE_TOAST",toastId:e})},1e6);z.set(e,s)},H=(e,s)=>{switch(s.type){case"ADD_TOAST":return{...e,toasts:[s.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===s.toast.id?{...e,...s.toast}:e)};case"DISMISS_TOAST":{let{toastId:t}=s;return t?J(t):e.toasts.forEach(e=>{J(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===t||void 0===t?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===s.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==s.toastId)}}},B=[],Q={toasts:[]};function $(e){Q=H(Q,e),B.forEach(e=>{e(Q)})}function X(e){let{...s}=e,t=(V=(V+1)%Number.MAX_SAFE_INTEGER).toString(),a=()=>$({type:"DISMISS_TOAST",toastId:t});return $({type:"ADD_TOAST",toast:{...s,id:t,open:!0,onOpenChange:e=>{e||a()}}}),{id:t,dismiss:a,update:e=>$({type:"UPDATE_TOAST",toast:{...e,id:t}})}}function K(e){var s,t,o,l,c,d,u,m;let{content:p,setContent:x}=e,[f,y]=(0,n.useState)("services"),[b,j]=(0,n.useState)(!1);if(console.log("ContentOutput received content:",{technology:null==p?void 0:p.technology,technologyType:typeof(null==p?void 0:p.technology),questionsCount:null==p?void 0:null===(s=p.questions)||void 0===s?void 0:s.length,servicesCount:null==p?void 0:null===(t=p.services)||void 0===t?void 0:t.length,servicesIsArray:Array.isArray(null==p?void 0:p.services),contentValid:!!p&&!!p.services&&Array.isArray(p.services)&&p.services.length>=1}),(null==p?void 0:null===(o=p.questions)||void 0===o?void 0:o.length)>0&&(console.log("Questions structure:",JSON.stringify(p.questions.slice(0,2),null,2)),(null===(m=p.questions[0])||void 0===m?void 0:null===(u=m.options)||void 0===u?void 0:u.length)>0&&console.log("Options structure for first question:",JSON.stringify(p.questions[0].options.slice(0,2),null,2))),!p)return console.error("ContentOutput: content is null or undefined"),S("Content Generation Failed","The generated content is missing. Please try again or adjust your input/model settings.");if(!p.services)return console.error("ContentOutput: content.services is missing"),S("Content Generation Failed","The generated content is missing services. Please try again or adjust your input/model settings.");if(!Array.isArray(p.services))return console.error("ContentOutput: content.services is not an array",typeof p.services),S("Content Generation Failed","The generated content has an invalid service structure. Please try again or adjust your input/model settings.");if(0===p.services.length)return console.error("ContentOutput: content.services is empty array"),S("Content Generation Failed","The generated content has no services. Please try again or adjust your input/model settings.");let N=[];if(!p.services.every((e,s)=>{let t=e&&"object"==typeof e&&("string"==typeof e.phase||"string"==typeof e.name||"string"==typeof e.service)&&("string"==typeof e.description||void 0===e.description)&&("number"==typeof e.hours||void 0===e.hours);return t||N.push({index:s,service:e,reasons:{isObject:"object"==typeof e,hasPhase:"string"==typeof e.phase,hasName:"string"==typeof e.name,hasService:"string"==typeof e.service,hasValidDescription:"string"==typeof e.description||void 0===e.description,hasValidHours:"number"==typeof e.hours||void 0===e.hours}}),t}))return console.error("ContentOutput: services have invalid structure",p.services),console.error("Invalid services details:",N),S("Content Generation Failed","The generated content has invalid service structure. Please try again or adjust your input/model settings.");let w={Planning:"bg-blue-100 text-blue-800",Design:"bg-green-100 text-green-800",Implementation:"bg-orange-100 text-orange-800",Testing:"bg-purple-100 text-purple-800","Go-Live":"bg-red-100 text-red-800",Support:"bg-gray-100 text-gray-800"};function S(e,s){return(0,a.jsx)(r.Zp,{children:(0,a.jsx)(r.Wu,{className:"p-8",children:(0,a.jsxs)("div",{className:"text-center text-red-500",children:[(0,a.jsx)(g.A,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),(0,a.jsx)("div",{className:"font-bold text-lg mb-2",children:e}),(0,a.jsx)("div",{className:"text-sm",children:s})]})})})}let k=async()=>{try{(await fetch("/api/push-to-scopestack",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(p)})).ok?alert("Content successfully pushed to ScopeStack!"):alert("Failed to push to ScopeStack. Check your settings.")}catch(e){alert("Failed to push to ScopeStack. Check your settings.")}},A=e=>{switch(e){case"multiplier":return"bg-orange-100 text-orange-800";case"additive":return"bg-blue-100 text-blue-800";case"conditional":return"bg-purple-100 text-purple-800";default:return"bg-gray-100 text-gray-800"}},C=e=>"string"==typeof e.service?e.service:"string"==typeof e.name?e.name:"Service",O=e=>"string"==typeof e.phase?e.phase:"General",R=e=>e.subservices&&Array.isArray(e.subservices)?e.subservices.filter(e=>e&&"object"==typeof e&&("string"==typeof e.name||void 0===e.name)&&("string"==typeof e.description||void 0===e.description)&&("number"==typeof e.hours||void 0===e.hours)):[],I=e=>{if("string"==typeof e)return e;if(!e||"object"!=typeof e)return"Option";if("string"==typeof e.key&&""!==e.key.trim())return e.key;if("string"==typeof e.value&&""!==e.value.trim())return e.value;if("string"==typeof e.label&&""!==e.label.trim())return e.label;if("string"==typeof e.text&&""!==e.text.trim())return e.text;if("string"==typeof e.display&&""!==e.display.trim())return e.display;if("number"==typeof e.value)return String(e.value);try{let s=JSON.stringify(e);if(s.length<30)return s}catch(e){}return"Option"},T=(e,s)=>{if("number"==typeof e.numericalValue)return e.numericalValue;if("number"==typeof e.value)return e.value;if("string"==typeof e.value){let s=parseFloat(e.value);if(!isNaN(s))return s}return"number"==typeof e.numberValue?e.numberValue:"number"==typeof e.number?e.number:s+1},E=async(e,s)=>{if(!p)return;let t=p.services[e],a=t.subservices[s];j(!0);try{let n='Generate professional scope language for the following IT service:\n\nTechnology: {technology}\nPhase: {phase}\nService: {serviceName}\nSubservice: {subserviceName}\n\nYou are a senior IT Services Consultant and Statement of Work specialist. Your goal is to write clear, professional, and client-ready Statement of Work (SOW) descriptions that define deliverables, scope boundaries, assumptions, and client responsibilities for specific IT services tasks.\n\nEach SOW entry should be written at the subservice level, but should reflect the context of its parent Service and the Phase in which it occurs.\n\nWriting guidelines:\n- Use precise, outcome-oriented language\n- Anchor the language in the context of the Phase (e.g., Planning, Implementation, Post-Go Live)\n- Reference the parent Service when needed to provide clarity or grouping\n- Use active voice and professional tone\n- Avoid overly technical jargon unless necessary\n- Keep each section concise but comprehensive\n\nReturn a JSON object with ONLY these four sections:\n{\n  "serviceDescription": "Comprehensive explanation of what this subservice entails and delivers",\n  "keyAssumptions": "List of assumptions made for this subservice",\n  "clientResponsibilities": "What the client must provide or do for this subservice",\n  "outOfScope": "What is explicitly excluded from this subservice"\n}\n\nIMPORTANT: Return ONLY valid JSON. No markdown, no explanations, just the JSON object.',r=localStorage.getItem("scope_language_prompt");r&&"string"==typeof r&&(n=r);let i=n.replace(/{technology}/g,p.technology||"").replace(/{phase}/g,t.phase||"").replace(/{serviceName}/g,t.service||t.name||"").replace(/{subserviceName}/g,a.name||""),o=await fetch("/api/test-openrouter",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:i,model:"openai/gpt-4o"})});if(!o.ok)throw Error("Failed to regenerate scope language");let l=await o.json();if(l&&l.text)try{let t=l.text.replace(/```json|```/g,"").trim(),n=JSON.parse(t),r=[...p.services];r[e].subservices[s]={...a,serviceDescription:n.serviceDescription,keyAssumptions:n.keyAssumptions,clientResponsibilities:n.clientResponsibilities,outOfScope:n.outOfScope},x({...p,services:r}),X({title:"Scope language regenerated",description:"Updated scope language for ".concat(a.name)})}catch(e){console.error("Failed to parse scope language:",e),X({title:"Error",description:"Failed to parse the regenerated scope language",variant:"destructive"})}else throw Error("Invalid response from API")}catch(e){console.error("Error regenerating scope language:",e),X({title:"Error",description:"Failed to regenerate scope language",variant:"destructive"})}finally{j(!1)}};return(0,a.jsxs)(r.Zp,{children:[(0,a.jsx)(r.aR,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)(r.ZB,{className:"flex items-center gap-2",children:[(0,a.jsx)(g.A,{className:"h-5 w-5"}),"Generated Content: ","string"==typeof p.technology?p.technology:"Unknown Technology"]}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)(v.E,{variant:"outline",className:"flex items-center gap-1",children:[(0,a.jsx)(_,{className:"h-3 w-3"}),p.totalHours||0," hours"]}),(0,a.jsxs)(i.$,{onClick:()=>{let e=new Blob([JSON.stringify({technology:"string"==typeof p.technology?p.technology:"Unknown Technology",totalHours:p.totalHours||0,questions:p.questions||[],calculations:p.calculations||[],services:p.services||[],generatedAt:new Date().toISOString(),sources:p.sources||[]},null,2)],{type:"application/json"}),s=URL.createObjectURL(e),t=document.createElement("a");t.href=s,t.download="scopestack-".concat(("string"==typeof p.technology?p.technology:"unknown").toLowerCase().replace(/\s+/g,"-"),".json"),document.body.appendChild(t),t.click(),document.body.removeChild(t),URL.revokeObjectURL(s)},variant:"outline",children:[(0,a.jsx)(L,{className:"h-4 w-4 mr-2"}),"Export JSON"]}),(0,a.jsxs)(i.$,{onClick:k,className:"bg-green-600 hover:bg-green-700",children:[(0,a.jsx)(Z,{className:"h-4 w-4 mr-2"}),"Push to ScopeStack"]})]})]})}),(0,a.jsx)(r.Wu,{children:(0,a.jsxs)(U.tU,{defaultValue:"questions",className:"w-full",children:[(0,a.jsxs)(U.j7,{className:"grid w-full grid-cols-3",children:[(0,a.jsxs)(U.Xi,{value:"questions",children:["Discovery Questions (",(null===(l=p.questions)||void 0===l?void 0:l.length)||0,")"]}),(0,a.jsxs)(U.Xi,{value:"calculations",children:["Calculations (",(null===(c=p.calculations)||void 0===c?void 0:c.length)||0,")"]}),(0,a.jsxs)(U.Xi,{value:"services",children:["Service Structure (",(null===(d=p.services)||void 0===d?void 0:d.length)||0,")"]})]}),(0,a.jsxs)(U.av,{value:"questions",className:"space-y-4",children:[(0,a.jsx)("div",{className:"text-sm text-gray-600 mb-4",children:"Research-generated questions with numerical values for calculations and subservice mapping"}),p.questions&&Array.isArray(p.questions)&&p.questions.length>0?p.questions.map((e,s)=>(0,a.jsx)(r.Zp,{className:"border-l-4 border-l-blue-500",children:(0,a.jsxs)(r.Wu,{className:"p-4",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,a.jsxs)("div",{className:"font-medium",children:[s+1,". ",e.question||"Question text not available"]}),(0,a.jsxs)(v.E,{variant:"outline",className:"flex items-center gap-1 text-xs",children:[(0,a.jsx)(G,{className:"h-3 w-3"}),e.slug||"no-slug"]})]}),(0,a.jsx)("div",{className:"space-y-2",children:e.options&&Array.isArray(e.options)&&e.options.length>0?e.options.map((e,s)=>(0,a.jsx)("div",{className:"p-3 rounded border ".concat(e.default?"bg-blue-50 border-blue-200":"bg-gray-50 border-gray-200"),children:(0,a.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,a.jsx)("span",{className:"font-medium",children:I(e)}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)(v.E,{variant:"secondary",className:"text-xs",children:["Value: ",T(e,s)]}),e.default&&(0,a.jsx)(v.E,{variant:"default",className:"text-xs",children:"Default"})]})]})},s)):(0,a.jsx)("div",{className:"text-center text-gray-500 py-2",children:(0,a.jsx)("div",{className:"text-sm",children:"No options available"})})})]})},e.id||s)):(0,a.jsx)("div",{className:"text-center text-gray-500 py-4",children:(0,a.jsx)("div",{className:"text-sm",children:"No questions generated"})})]}),(0,a.jsxs)(U.av,{value:"calculations",className:"space-y-4",children:[(0,a.jsx)("div",{className:"text-sm text-gray-600 mb-4",children:"Dynamic calculations that combine question values to determine subservice hour adjustments"}),p.calculations&&Array.isArray(p.calculations)&&p.calculations.length>0?p.calculations.map((e,s)=>(0,a.jsx)(r.Zp,{className:"border-l-4 border-l-orange-500",children:(0,a.jsxs)(r.Wu,{className:"p-4",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium mb-1",children:e.name}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:e.description})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)(v.E,{variant:"outline",className:"flex items-center gap-1 text-xs",children:[(0,a.jsx)(G,{className:"h-3 w-3"}),e.slug||"no-slug"]}),(0,a.jsx)(v.E,{className:"text-xs ".concat(A(e.resultType||"")),children:e.resultType||"unknown"})]})]}),(0,a.jsxs)("div",{className:"bg-gray-50 p-3 rounded border mb-3",children:[(0,a.jsx)("div",{className:"text-sm font-medium mb-1",children:"Formula:"}),(0,a.jsx)("code",{className:"text-sm bg-white px-2 py-1 rounded border",children:e.formula})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1 flex-wrap",children:[(0,a.jsx)("span",{className:"text-sm text-gray-500",children:"Uses questions:"}),e.mappedQuestions&&Array.isArray(e.mappedQuestions)&&e.mappedQuestions.length>0?e.mappedQuestions.map((e,s)=>(0,a.jsx)(v.E,{variant:"secondary",className:"text-xs",children:e||"unknown"},s)):(0,a.jsx)("span",{className:"text-sm text-gray-400",children:"No questions mapped"})]})]})},e.id||s)):(0,a.jsx)(r.Zp,{className:"border-l-4 border-l-gray-300",children:(0,a.jsx)(r.Wu,{className:"p-4",children:(0,a.jsxs)("div",{className:"text-center text-gray-500",children:[(0,a.jsx)(h,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),(0,a.jsx)("div",{className:"font-medium",children:"No calculations generated"}),(0,a.jsx)("div",{className:"text-sm",children:"Calculations are created when subservices have multiple mapped questions"})]})})})]}),(0,a.jsxs)(U.av,{value:"services",className:"space-y-4",children:[(0,a.jsx)("div",{className:"text-sm text-gray-600 mb-4",children:"Professional services structure with question mapping and calculations for dynamic hour adjustments"}),p.services&&Array.isArray(p.services)&&p.services.length>0?(e=>{if(!Array.isArray(e))return[];let s={Initiating:1,Planning:2,Design:2,Implementation:3,"Monitoring & Control":4,"Close Out":5};return[...e].sort((e,t)=>{let a=e.phase||"Implementation",n=t.phase||"Implementation";return(s[a]||3)-(s[n]||3)})})(p.services).map((e,s)=>(0,a.jsx)(r.Zp,{className:"border-l-4 border-l-green-500",children:(0,a.jsxs)(r.Wu,{className:"p-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(v.E,{className:w[O(e)]||"bg-gray-100 text-gray-800",children:O(e)}),(0,a.jsx)("span",{className:"font-medium",children:C(e)})]}),(0,a.jsxs)(v.E,{variant:"outline",className:"flex items-center gap-1",children:[(0,a.jsx)(_,{className:"h-3 w-3"}),"number"==typeof e.hours?"".concat(e.hours,"h"):"Hours not specified"]})]}),(0,a.jsx)("p",{className:"text-gray-600 mb-4",children:e.description||"No description available"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-semibold text-xs text-gray-700 mb-1",children:"Service Description"}),(0,a.jsx)("div",{className:"text-xs text-gray-600 bg-gray-50 p-2 rounded border",children:e.serviceDescription||"Not specified"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-semibold text-xs text-gray-700 mb-1",children:"Key Assumptions"}),(0,a.jsx)("div",{className:"text-xs text-gray-600 bg-gray-50 p-2 rounded border",children:e.keyAssumptions||"Not specified"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-semibold text-xs text-gray-700 mb-1",children:"Client Responsibilities"}),(0,a.jsx)("div",{className:"text-xs text-gray-600 bg-gray-50 p-2 rounded border",children:e.clientResponsibilities||"Not specified"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-semibold text-xs text-gray-700 mb-1",children:"Out of Scope"}),(0,a.jsx)("div",{className:"text-xs text-gray-600 bg-gray-50 p-2 rounded border",children:e.outOfScope||"Not specified"})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("div",{className:"font-medium text-sm",children:"Subservices:"}),R(e).length>0?R(e).map((e,t)=>(0,a.jsxs)("div",{className:"bg-gray-50 p-3 rounded border",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("span",{className:"font-medium text-sm",children:e.name||"Subservice ".concat(t+1)}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(v.E,{variant:"outline",className:"text-xs",children:"number"==typeof e.hours?"".concat(e.hours,"h base"):"Hours not specified"}),e.calculationSlug&&(0,a.jsxs)(v.E,{variant:"secondary",className:"text-xs flex items-center gap-1",children:[(0,a.jsx)(h,{className:"h-3 w-3"}),e.calculationSlug]})]})]}),(0,a.jsx)("p",{className:"text-xs text-gray-600 mb-2",children:e.description||"No description available"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 mb-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-semibold text-xs text-gray-700 mb-1",children:"Service Description"}),(0,a.jsx)("div",{className:"text-xs text-gray-600 bg-white p-1 rounded border",children:e.serviceDescription||"Not specified"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-semibold text-xs text-gray-700 mb-1",children:"Key Assumptions"}),(0,a.jsx)("div",{className:"text-xs text-gray-600 bg-white p-1 rounded border",children:e.keyAssumptions||"Not specified"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-semibold text-xs text-gray-700 mb-1",children:"Client Responsibilities"}),(0,a.jsx)("div",{className:"text-xs text-gray-600 bg-white p-1 rounded border",children:e.clientResponsibilities||"Not specified"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-semibold text-xs text-gray-700 mb-1",children:"Out of Scope"}),(0,a.jsx)("div",{className:"text-xs text-gray-600 bg-white p-1 rounded border",children:e.outOfScope||"Not specified"})]})]}),e.serviceDescription&&(0,a.jsxs)("div",{className:"space-y-4 mt-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-gray-900",children:"Scope Language"}),(0,a.jsx)(i.$,{variant:"outline",size:"sm",className:"h-7 px-2 text-xs",onClick:()=>E(s,t),disabled:b,children:b?"Regenerating...":"Regenerate"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-3 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium text-gray-700",children:"Service Description"}),(0,a.jsx)("div",{className:"mt-1 text-gray-600",children:e.serviceDescription})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium text-gray-700",children:"Key Assumptions"}),(0,a.jsx)("div",{className:"mt-1 text-gray-600",children:e.keyAssumptions})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium text-gray-700",children:"Client Responsibilities"}),(0,a.jsx)("div",{className:"mt-1 text-gray-600",children:e.clientResponsibilities})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium text-gray-700",children:"Out of Scope"}),(0,a.jsx)("div",{className:"mt-1 text-gray-600",children:e.outOfScope})]})]})]}),e.mappedQuestions&&Array.isArray(e.mappedQuestions)&&e.mappedQuestions.length>0?(0,a.jsxs)("div",{className:"flex items-center gap-1 flex-wrap mb-2",children:[(0,a.jsx)("span",{className:"text-xs text-gray-500",children:e.calculationSlug?"Calculation uses:":"Mapped to:"}),e.mappedQuestions.map((e,s)=>(0,a.jsx)(v.E,{variant:"secondary",className:"text-xs",children:e||"unknown"},s))]}):(0,a.jsx)("div",{className:"text-xs text-gray-400 mb-2",children:e.calculationSlug?"No questions mapped to calculation":"No questions mapped"}),e.calculationSlug&&(0,a.jsx)("div",{className:"text-xs text-blue-600 bg-blue-50 px-2 py-1 rounded",children:"Final hours = base hours \xd7 calculation result"})]},t)):(0,a.jsx)("div",{className:"text-center text-gray-500 py-4",children:(0,a.jsx)("div",{className:"text-sm",children:"No subservices defined"})})]})]})},s)):(0,a.jsx)(r.Zp,{className:"border-l-4 border-l-gray-300",children:(0,a.jsx)(r.Wu,{className:"p-4",children:(0,a.jsxs)("div",{className:"text-center text-gray-500",children:[(0,a.jsx)(g.A,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),(0,a.jsx)("div",{className:"font-medium",children:"No services generated"}),(0,a.jsx)("div",{className:"text-sm",children:"Services will appear here after content generation"})]})})})]})]})})]})}var Y=t(786);let ee=(0,c.A)("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]),es=(0,c.A)("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]),et=(0,c.A)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);var ea=t(1261);let en=(0,c.A)("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);function er(e){let{sources:s}=e,t=(Array.isArray(s)?s.map(e=>{if("string"==typeof e){let s=e.split(" | ");return{url:s[0]||"",title:s[1]||e,relevance:"Relevant for implementation",category:"Technical Resource"}}return e}):[]).map(e=>{let s={...e};if(s.url&&"string"==typeof s.url||(s.url=""),s.url.startsWith('"')&&s.url.endsWith('"')&&(s.url=s.url.substring(1,s.url.length-1)),s.url&&!s.url.startsWith("http")&&(s.url="https://"+s.url),!s.title){if(s.url)try{let e=new URL(s.url);s.title=e.hostname.replace("www.","")}catch(e){s.title="Resource"}else s.title="Resource"}if(s.relevance){if("string"!=typeof s.relevance)try{if(s.relevance&&"object"==typeof s.relevance){let e=s.relevance.description||s.relevance.text||s.relevance.info||JSON.stringify(s.relevance);s.relevance=e}else s.relevance=String(s.relevance)}catch(e){s.relevance="Source for implementation"}}else s.relevance="Relevant for implementation";return s.category||(s.category="Technical Resource"),s}),n=e=>{if(!e)return(0,a.jsx)(Y.A,{className:"h-4 w-4"});let s=e.toLowerCase();return s.includes("vendor")||s.includes("official")?(0,a.jsx)(ee,{className:"h-4 w-4"}):s.includes("research")||s.includes("analyst")?(0,a.jsx)(es,{className:"h-4 w-4"}):s.includes("community")?(0,a.jsx)(et,{className:"h-4 w-4"}):s.includes("documentation")?(0,a.jsx)(g.A,{className:"h-4 w-4"}):s.includes("database")?(0,a.jsx)(ea.A,{className:"h-4 w-4"}):s.includes("technical")?(0,a.jsx)(en,{className:"h-4 w-4"}):(0,a.jsx)(Y.A,{className:"h-4 w-4"})};return t.length?(0,a.jsxs)(r.Zp,{children:[(0,a.jsx)(r.aR,{children:(0,a.jsx)(r.ZB,{className:"text-lg",children:"Sources"})}),(0,a.jsx)(r.Wu,{children:(0,a.jsx)("div",{className:"space-y-4",children:t.map((e,s)=>(0,a.jsxs)("div",{className:"border-b pb-3 last:border-0 last:pb-0",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[e.url?(0,a.jsxs)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"font-medium hover:underline flex items-center",children:[(0,a.jsx)(Y.A,{className:"mr-2 h-4 w-4"}),e.title]}):(0,a.jsxs)("div",{className:"font-medium flex items-center",children:[(0,a.jsx)(Y.A,{className:"mr-2 h-4 w-4"}),e.title]}),(0,a.jsxs)(v.E,{variant:"outline",className:"flex items-center",children:[n(e.category),(0,a.jsx)("span",{className:"ml-1",children:e.category})]})]}),e.relevance&&"string"==typeof e.relevance&&(0,a.jsx)("p",{className:"mt-1 text-sm text-muted-foreground",children:e.relevance})]},s))})})]}):(0,a.jsxs)(r.Zp,{children:[(0,a.jsx)(r.aR,{children:(0,a.jsx)(r.ZB,{className:"text-lg",children:"Sources"})}),(0,a.jsx)(r.Wu,{children:(0,a.jsxs)("div",{className:"flex items-center text-muted-foreground",children:[(0,a.jsx)(P,{className:"mr-2 h-4 w-4"}),(0,a.jsx)("p",{children:"No sources available"})]})})]})}var ei=t(8459),eo=t.n(ei);function el(){let[e,s]=(0,n.useState)(""),[t,c]=(0,n.useState)(!1),[v,f]=(0,n.useState)([]),[y,b]=(0,n.useState)(null),[j,N]=(0,n.useState)(0),[w,S]=(0,n.useState)(!1);(0,n.useEffect)(()=>{let e=localStorage.getItem("generated_content"),t=localStorage.getItem("user_input");if(console.log("Initial load from localStorage:",{savedContent:e?"exists":"null",savedInput:t,savedInputLength:(null==t?void 0:t.length)||0}),e)try{b(JSON.parse(e))}catch(e){console.error("Failed to parse saved content:",e)}t?(console.log("Setting userInput from localStorage:",t),s(t)):console.log("No saved input found in localStorage"),console.log("Current settings loaded:",{researchModel:localStorage.getItem("research_model")||"default",analysisModel:localStorage.getItem("analysis_model")||"default",contentModel:localStorage.getItem("content_model")||"default",formatModel:localStorage.getItem("format_model")||"default",hasCustomPrompts:{parsing:!!localStorage.getItem("parsing_prompt"),research:!!localStorage.getItem("research_prompt"),analysis:!!localStorage.getItem("analysis_prompt")}})},[]),(0,n.useEffect)(()=>{y&&(console.log("Generated content state updated:",y),localStorage.setItem("generated_content",JSON.stringify(y)),S(!0))},[y]),(0,n.useEffect)(()=>{e&&localStorage.setItem("user_input",e),console.log("Input state updated:",{userInput:e,isEmpty:!e.trim(),isProcessing:t,buttonDisabled:!e.trim()||t})},[e,t]);let k=async()=>{if(console.log("Generate button clicked",{userInput:e}),e.trim()){c(!0),N(0),b(null),S(!1),f([{id:"parse",title:"Parsing Technology Requirements",status:"active"},{id:"research",title:"Conducting Live Web Research",status:"pending"},{id:"analyze",title:"Analyzing Research Findings",status:"pending"},{id:"generate",title:"Generating Content Structure",status:"pending"},{id:"format",title:"Formatting for ScopeStack",status:"pending"}]);try{var s,t,a,n,r,i,o,l;N(10),await new Promise(e=>setTimeout(e,1e3)),console.log("Sending research request to API...");let d=await fetch("/api/research",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({input:e,models:{research:localStorage.getItem("research_model")||"anthropic/claude-3.5-sonnet",analysis:localStorage.getItem("analysis_model")||"openai/gpt-4-turbo",content:localStorage.getItem("content_model")||"anthropic/claude-3.5-sonnet",format:localStorage.getItem("format_model")||"openai/gpt-4o"},prompts:{parsing:localStorage.getItem("parsing_prompt"),research:localStorage.getItem("research_prompt"),analysis:localStorage.getItem("analysis_prompt")}})});if(!d.ok)throw console.error("Research API response not OK:",d.status,d.statusText),Error("Research failed with status ".concat(d.status));console.log("Research API response received, setting up SSE reader...");let u=null===(s=d.body)||void 0===s?void 0:s.getReader();if(!u)throw Error("No response stream");let m=new TextDecoder,p="";console.log("Starting to read SSE stream...");try{for(;;){let{done:s,value:d}=await u.read();if(s){console.log("SSE stream complete");break}let g=(p+=m.decode(d,{stream:!0})).split("\n");for(let s of(p=g.pop()||"",g))if(s.startsWith("data: "))try{console.log("SSE event received:",s.slice(6,100)+"...");let d=JSON.parse(s.slice(6));if("step"===d.type)console.log("Step update:",d.stepId,d.status,d.progress),f(e=>e.map(e=>e.id===d.stepId?{...e,status:d.status,model:d.model,sources:d.sources}:e)),N(d.progress);else if("complete"===d.type){if(console.log("Complete event received"),console.log("Content received:",{technology:null===(t=d.content)||void 0===t?void 0:t.technology,servicesCount:null===(n=d.content)||void 0===n?void 0:null===(a=n.services)||void 0===a?void 0:a.length,questionsCount:null===(i=d.content)||void 0===i?void 0:null===(r=i.questions)||void 0===r?void 0:r.length,services:null===(o=d.content)||void 0===o?void 0:o.services,isServicesArray:Array.isArray(null===(l=d.content)||void 0===l?void 0:l.services),contentValid:!!d.content&&!!d.content.services&&Array.isArray(d.content.services)}),!d.content){console.error("Content is missing in the response"),alert("Content generation failed: Missing content in the response"),c(!1);return}if(d.content.technology||(d.content.technology=e||"Technology Solution"),d.content.services&&Array.isArray(d.content.services)||(console.error("Services is missing or not an array"),d.content.services=[]),0===d.content.services.length){console.log("Creating default services because none were found");let s=d.content.technology||e||"Technology Solution";d.content.services=[{phase:"Planning",name:"".concat(s," Assessment"),description:"Comprehensive assessment of requirements for ".concat(s),hours:40,subservices:[{name:"Requirements Gathering",description:"Detailed collection of requirements for ".concat(s),hours:16,serviceDescription:"This service focuses on gathering detailed requirements for your ".concat(s," implementation. Our team will conduct stakeholder interviews, document technical specifications, and identify key success factors for your project."),keyAssumptions:"Client stakeholders will be available for requirements gathering sessions. Existing documentation will be provided where available.",clientResponsibilities:"Provide access to key stakeholders and subject matter experts. Share existing documentation and business processes.",outOfScope:"Development of custom solutions outside standard ".concat(s," capabilities. Business process reengineering.")},{name:"Current State Analysis",description:"Analysis of current environment for ".concat(s," implementation"),hours:16,serviceDescription:"This service provides a comprehensive analysis of your current environment to prepare for ".concat(s," implementation. Our experts will evaluate existing systems, identify potential challenges, and document the baseline configuration."),keyAssumptions:"Access to current systems and documentation will be provided. Technical staff will be available for interviews and questions.",clientResponsibilities:"Provide access to systems and environments. Make technical staff available for consultation. Provide existing documentation.",outOfScope:"Remediation of issues found during analysis. Implementation of recommendations."},{name:"Planning Documentation",description:"Creation of planning documents for ".concat(s," implementation"),hours:8,serviceDescription:"This service delivers comprehensive planning documentation for your ".concat(s," implementation. Our team will create detailed project plans, technical specifications, and implementation roadmaps tailored to your requirements."),keyAssumptions:"Requirements gathering and current state analysis have been completed. Client approval process is clearly defined.",clientResponsibilities:"Review and approve documentation in a timely manner. Provide feedback on drafts and technical specifications.",outOfScope:"Development of custom templates or non-standard documentation formats. Translation to languages other than English."}]},{phase:"Implementation",name:"".concat(s," Implementation"),description:"Core implementation of ".concat(s," solution"),hours:80,subservices:[{name:"Configuration",description:"Configuration of ".concat(s," components"),hours:40,serviceDescription:"This service provides expert configuration of all ".concat(s," components according to best practices and your specific requirements. Our team will implement the solution with attention to security, performance, and usability."),keyAssumptions:"Planning phase has been completed and approved. Required infrastructure is available and accessible.",clientResponsibilities:"Provide timely access to systems and environments. Ensure prerequisites are met before configuration begins.",outOfScope:"Configuration of systems not directly related to ".concat(s,". Custom development beyond standard configuration options.")},{name:"Integration",description:"Integration of ".concat(s," with existing systems"),hours:24,serviceDescription:"This service ensures seamless integration between ".concat(s," and your existing systems. Our integration specialists will configure connections, data flows, and authentication mechanisms to create a cohesive environment."),keyAssumptions:"Existing systems are properly documented and accessible. Integration points are clearly defined in the planning phase.",clientResponsibilities:"Provide documentation and access to existing systems. Make technical staff available for integration questions and testing.",outOfScope:"Upgrades or modifications to existing systems to enable integration. Development of custom integration components."},{name:"Testing",description:"Testing of ".concat(s," implementation"),hours:16,serviceDescription:"This service provides comprehensive testing of your ".concat(s," implementation to ensure it meets all requirements and performs optimally. Our team will conduct functional, performance, and integration testing."),keyAssumptions:"Configuration and integration work has been completed. Test environments are available and properly configured.",clientResponsibilities:"Participate in user acceptance testing. Provide timely feedback on test results. Sign off on test completion.",outOfScope:"Automated test script development. Load testing beyond standard performance validation."}]}],d.content.totalHours=d.content.services.reduce((e,s)=>e+(s.hours||0),0)}d.content.questions&&Array.isArray(d.content.questions)||(d.content.questions=[]),d.content.calculations&&Array.isArray(d.content.calculations)||(d.content.calculations=[]),d.content.sources&&Array.isArray(d.content.sources)||(d.content.sources=[]),b(d.content),N(100)}}catch(e){console.error("Error parsing SSE data:",e,"Raw data:",s)}}}catch(e){throw console.error("Error processing SSE stream:",e),Error("Error processing research results: ".concat(e instanceof Error?e.message:"Unknown stream error"))}finally{try{u.releaseLock()}catch(e){console.error("Error releasing reader lock:",e)}}}catch(e){console.error("Generation failed:",e),alert("Content generation failed: ".concat(e instanceof Error?e.message:"Unknown error")),f(e=>e.map(e=>"active"===e.status?{...e,status:"error"}:e))}finally{c(!1)}}};return(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-4",children:(0,a.jsxs)("div",{className:"max-w-6xl mx-auto space-y-6",children:[(0,a.jsxs)("div",{className:"text-center space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)(i.$,{onClick:()=>{b(null),s(""),f([]),N(0),S(!1),localStorage.removeItem("generated_content"),localStorage.removeItem("user_input"),console.log("Content and input cleared successfully")},variant:"outline",className:"flex items-center gap-2 text-gray-600 hover:text-gray-800",disabled:t,children:[(0,a.jsx)(l.A,{className:"h-4 w-4"}),"Reset"]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(i.$,{onClick:()=>{if(console.log("Debug localStorage:",{userInput:e,savedInput:localStorage.getItem("user_input"),buttonDisabled:!e.trim()||t}),!e&&localStorage.getItem("user_input")){let e=localStorage.getItem("user_input");console.log("Force resetting userInput from localStorage:",e),s(e||"")}},variant:"outline",className:"flex items-center gap-2 text-orange-600",children:"Debug"}),(0,a.jsx)(eo(),{href:"/settings",children:(0,a.jsxs)(i.$,{variant:"outline",className:"flex items-center gap-2",children:[(0,a.jsx)(d,{className:"h-4 w-4"}),"Settings"]})})]})]}),(0,a.jsx)("h1",{className:"text-4xl font-bold text-gray-900",children:"ScopeStack Research-Driven Content Engine"}),(0,a.jsx)("p",{className:"text-lg text-gray-600 max-w-3xl mx-auto",children:"Conducts fresh research every time to generate structured professional services content dynamically from actual research findings. No templates, no canned data."})]}),(0,a.jsxs)(r.Zp,{children:[(0,a.jsx)(r.aR,{children:(0,a.jsxs)(r.ZB,{className:"flex items-center gap-2",children:[(0,a.jsx)(u,{className:"h-5 w-5"}),"Describe Your Technology Solution"]})}),(0,a.jsxs)(r.Wu,{className:"space-y-4",children:[(0,a.jsx)(o.T,{placeholder:"e.g., Cisco ISE implementation for 500-user healthcare organization with HIPAA compliance requirements, including network segmentation and guest access management",value:e,onChange:e=>{console.log("Textarea onChange:",e.target.value),s(e.target.value)},rows:4,className:"w-full"}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{className:"text-sm text-gray-500",children:["Be specific about technology, scale, industry, and compliance requirements",(0,a.jsx)("button",{onClick:()=>{let e="Microsoft Email Migration to Office 365 for a Hospital with 1000 users";s(e),console.log("Sample input set:",e)},className:"ml-2 text-blue-600 hover:text-blue-800 underline text-xs",children:"Use sample input"})]}),(0,a.jsx)(i.$,{onClick:k,disabled:!e||!e.trim()||t,className:"bg-blue-600 hover:bg-blue-700",children:t?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(m,{className:"h-4 w-4 mr-2 animate-spin"}),"Researching..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(p.A,{className:"h-4 w-4 mr-2"}),"Generate Content"]})})]})]})]}),(t||v.length>0)&&(0,a.jsx)(F,{steps:v,progress:j,isCollapsed:w&&!t,onToggleCollapse:()=>S(!w)}),(console.log("Checking if should render ContentOutput. generatedContent:",y),y&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)(K,{content:y,setContent:b}),(0,a.jsx)(er,{sources:y.sources})]})),(0,a.jsx)(r.Zp,{className:"bg-white/50 backdrop-blur-sm",children:(0,a.jsxs)(r.Wu,{className:"p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Key Differentiators"}),(0,a.jsxs)("div",{className:"grid md:grid-cols-2 lg:grid-cols-5 gap-4",children:[(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)(u,{className:"h-5 w-5 text-blue-600 mt-1"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium",children:"Fresh Research"}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Live web research for every request"})]})]}),(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)(p.A,{className:"h-5 w-5 text-green-600 mt-1"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium",children:"Multi-Model AI via OpenRouter"}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Multiple AI models for enhanced research quality"})]})]}),(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)(g.A,{className:"h-5 w-5 text-purple-600 mt-1"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium",children:"Dynamic Content"}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Zero hardcoded templates"})]})]}),(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)(h,{className:"h-5 w-5 text-orange-600 mt-1"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium",children:"Smart Calculations"}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Ruby-based formulas for dynamic hour adjustments"})]})]}),(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)(x.A,{className:"h-5 w-5 text-indigo-600 mt-1"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium",children:"ScopeStack Ready"}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Direct integration with calculations and mappings"})]})]})]})]})})]})})}},7059:(e,s,t)=>{"use strict";t.d(s,{E:()=>o});var a=t(702);t(6606);var n=t(3490),r=t(9321);let i=(0,n.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function o(e){let{className:s,variant:t,...n}=e;return(0,a.jsx)("div",{className:(0,r.cn)(i({variant:t}),s),...n})}},9321:(e,s,t)=>{"use strict";t.d(s,{cn:()=>r});var a=t(2656),n=t(997);function r(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t];return(0,n.QP)((0,a.$)(s))}}},e=>{var s=s=>e(e.s=s);e.O(0,[587,393,685,358],()=>s(3316)),_N_E=e.O()}]);